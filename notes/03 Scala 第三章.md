# Scala 第三章

## 章节目标

1.  理解运算符的相关概述
2.  掌握运算符，赋值，关系，逻辑运算符的用法
3.  掌握交换变量案例
4.  理解位运算符的用法



## 1. 算术运算符

### 1.1 运算符简介

用来拼接变量或者常量的符号就叫：运算符，而通过运算符连接起来的式子就叫：表达式。实际开发中，我们会经常用到它。

例如：

​		10 + 3 这个就是一个表达式，而+号，就是一个运算符。

​		注意：`在Scala中，运算符并不仅仅是运算符，也是函数的一种`

### 1.2 运算符的分类

-   算数运算符

-   赋值运算符

-   关系运算符

-   逻辑运算符

-   位运算符

    >   注意：Scala中是没有三元运算符的，被 if-else 给取代了

### 1.3 算数运算符

算术运算符是指`用来进行算数操作的符号`，常用的有一下几种：

>   注意：
>
>   1.  Scala中没有++，--这俩个运算符
>   2.  整数相除的结果还是整数。如果想获取小数，则必须有浮点型数据参与。
>   3.  关于+号拼接字符串：任意类型的数据和字符串拼接，结果都是一个新的字符串。
>   4.  关于%操作，假设 a % b的值，它的底层原理其实是：a - a/b * b

### 1.4 代码演示

需求：演示算数运算符的常见操作

参考代码：

```scala
scala> println(+5)
5

scala> println(10 + 5)
15

scala> println("hello" + 5)
hello5

scala> println(-5)
-5

scala> println(10 -5)
5

scala> println(10 * 3)
30

scala> println("-" * 3)
---

scala> println(10 / 3)
3

scala> println(10 / 3.0)
3.3333333333333335

scala> println(10 % 3)
1

scala> println(-10 % 3)
-1

scala> println(10 % -3)
1
```



## 2. 赋值运算符

### 2.1 概述

赋值运算符指的就是用来`进行赋值操作的符号`。例如:把一个常星值，或者一个变量值甚至是某一段代码的执行结果赋值给变量，这些都要用到赋值运算符。

### 2.2 分类

-   赋值运算符常用的有两类

    -   基本赋值运算符

        `=` 就是基本赋值运算符，例如：var a:int = 3，就是把常量值3赋值给变量a

    -   拓展运算符

        `+=，-=，*=，/=，%=`

    >   注意：
    >
    >   1.  赋值运算符的左边必须是：变量，不能是常量．例如：3=5，这种写法就是错误的.
    >   2.  关于扩展赋值运算符，其实就是把左边的数据和右边的数据进行指定的操作，然后把结果赋值给左边。
    >       例如：a += 3就是把变量a的值和常量3进行加法操作，然后把结果赋值给变量a

### 2.3 代码演示

```scala
scala> var a = 1
var a: Int = 1

scala> a += 3

scala> println(a)
4

scala> a -= 2

scala> println(a)
2

scala> a *= 3

scala> println(a)
6

scala> a /= 2

scala> println(a)
3

scala> a %= 2

scala> println(a)
1
```



## 3. 关系运算符

### 3.1 概述

关系运算符指的就是用来进行比较操作的符号。例如：数据是否相等,是否不等，数据1大还是数据2大。。。等这些操作.

### 3.2 分类

>   注意：
>
>   1.  关系运算符的最终结果一定是Boolean类型的数据，true或false
>   2.  == 是相等，= 是赋值

### 3.3 代码演示

```scala
scala> var a = 3
var a: Int = 3

scala> var b = 5
var b: Int = 5

scala> println(a > b)
false

scala> println(a >= 3)
true

scala> println(a < 3)
false

scala> println(a <= 3)
true

scala> println(a == 3)
true

scala> println(a == b)
false

scala> println(a != b)
true

scala> println(a = b)
                 ^
       error: unknown parameter name: a
```

### 3.4 关系运算符延伸

Scala 和 Java 在比较数值和比较引用值(地址值) 的不同

| 需求描述             | Scala      | Java          |
| -------------------- | ---------- | ------------- |
| 比较数值             | == 或者 != | equals() 方法 |
| 比较引用值（地址值） | eq方法     | == 或者 !=    |

```scala
scala> val s1 = "abc"
val s1: String = abc

scala> val s2 = "abc"
val s2: String = abc

scala> println(s1 == s2)
true

scala> println(s1.eq(s2))
true
```



## 4. 逻辑运算符

### 4.1 概述

逻辑运算符指的就是`用来进行逻辑操作`的符号．可以简单理解为它是:组合判断.例如:判断多个条件是否都满足,或者满足其中的某一个,甚至还可以对某个判断结果进行取反操作.

### 4.2 分类

| 运算符 | 功能解释                                                     |
| ------ | ------------------------------------------------------------ |
| &&     | 逻辑与，要求所有条件都满足，简单记忆：有false则为false       |
| \|\|   | 逻辑或，要求只要满足任意一个条件即可，简单记忆：有true则整体为true |
| !      | 逻辑非，用来进行取反操作的。即：以前为true，取反后为false，以前为false，取反成为true。 |

>   注意：
>
>   1.  逻辑表达式不管多么复杂，最终结果一定是Boolean类型的值，要么是true，要么是false
>
>   2.  在Scala代码中，不能对一个Boolean类型的数据进行`连续取反`，但是在Java中是可以的。
>
>       即：!!false，会报错，不支持这种写法

### 4.3 代码演示

```scala
scala> println(2 > 3 && 3 < 5)
false

scala> println(true && false, true && false, true && true, false && false)
(false,false,true,false)

scala> println(true || false, true || false, true || true, false || false)
(true,true,true,false)

scala> println(!false)
true

scala> println(!!false)
<console>:1: error: ')' expected but 'false' found.
println(!!false)
          ^
```



## 5. 位运算符

### 5.1 铺垫知识

- 什么是进制
- 什么是8421码
- 整数的原码，反码，补码计算规则

#### 5.11 关于进制

进制就算逢几进几

| 进制     | 规则                                                         | 示例            |
| -------- | ------------------------------------------------------------ | --------------- |
| 二进制   | 数据以0b（大小写均可）开头，有数字0和1组成                   | 0b10001001      |
| 八进制   | 数据以0开头，由数字0～7组成                                  | 064，011        |
| 十进制   | 数据直接写即可，无特殊开头，由数字0～9组成                   | 10，20          |
| 十六进制 | 数据以0x（大小写均可）开头，有数字0～9，字母A～F组成（大小写均可） | 0x123F，0x66ABC |

> 注意：
>
> ​		关于二进制，最前面的一位叫：符号位，0表示正数，1表示负数，其他位叫做：数值位
>
> ​		例如：0b1001001 结果是一个负数，0b00101010 结果是一个正数

#### 5.1.2 关于8421码

8421码是用来表示`二进制位和十进制位之间关系的`，他可以帮助我们快速的计算数据的二进制或十进制形式。

8421码对应关系如下：

二进制位					   0	    0	  0      0	 0	0	0	0

对应的十进制数据		128	64	32	16	8	4	2	1

`1byte(字节) = 8bit(比特位) `

> 注意：
>
> 1. 计算规则：二进制位从右往左数，每多一位，对应的十进制数据 乘以2
> 2. 二进制和十进制互相转换的小技巧：
>
> ```
> 二进制转十进制：获取该二进制位对应的十进制数据，然后累加即可
> 例如：0b101 对应的十进制数据计算步骤：4 + 0 + 1 = 5
> 十进制转二进制：对十进制数据进行拆解，看哪些数字相加等于它，然后标记成二进制即可
> 例如：10 对应的二进制数据计算步骤：10 = 8 + 2 = 0b1010
> ```
>
> 

5.1.3 关于整数的原反补码计算规则

所谓的原反补码，其实指的都是二进制形式的数据。把十进制的数据转换成其对应的二进制数据，该二进制数据成为原码。

> 注意：计算机底层存储，操作和运算数据，都是采用`数据的二进制补码形式`来ushixian的

- 正数

  - 正数的原码，反码，补码都一样，不惜要特殊的计算

- 负数

  - 反码计算规则：原码的符号位不变，数值位按位取反（以前为0现在为1）

  - 补码运算规则：反码 + 1

    -5: -> 0b1000 0101(原码) -> 0b1111 1010(反码) -> 0b1111 1011(补码)

### 5.2 概述

位运算符指的是`按照位(bit)来快速操作数据值`，在计算机底层存储，运算，操作都采用的是二进制数据`补码`的形式。使用位运算符可以提高计算效率。

### 5.3 分类



| 运算符 | 功能解释                                                     |
| ------ | ------------------------------------------------------------ |
| &      | 按位与，有0则0，都1则1                                       |
| \|     | 按位或，有1则1，都0则0                                       |
| ^      | 按位异或，相同为0，不同为1                                   |
| ~      | 按位取反，0变1，1变0                                         |
| <<     | 按位左移，每左移一位，相当于该数据乘2。例如：2 << 1，结果为4 |
| >>     | 按位右移，每右移一位，相当于该数据除2。例如：6 >> 1，结果为3 |

> 注意：
>
> 1. 位运算符只针对于整型数据
> 2. 位运算符操作的是数据的二进制补码形式
> 3. 小技巧：一个数字被同一个数字位异或两次，该数字值不变。即：10 ^ 20 ^ 20 = 20

### 5.4 代码演示

```scala
scala> val a = 3     // 0b0000 0011
a: Int = 3

scala> val b = 5     // 0b0000 0101
b: Int = 5

scala> println(a & b)    // 0b0000 0001
1

scala> println(a | b)    // 0b0000 0111
7

scala> println(a ^ b)    // 0b0000 0110
6

scala> println(~a)    // 0b1111 1100(补码) -> 0b1111 1011(反码) -> 0b 1000 0100
-4

scala> println(~(-3))    // 0b1000 0011(原码) -> 0b1111 1100(反码) -> 0b1111 1101(补码) -> 0b0000 0010(结果)
2

scala> println(a << 2)    // 0b0000 0011 -> 0b0000 1100
12

scala> println(a >> 1)    // 0b0000 0011 -> ob0000 0001
1

scala> println(a ^ b ^ b)
3
```



## 6. 案例：交换两个变量的值

### 需求

已知有两个变量 a = 10，b = 20，代码实现 a = 20，b = 10

### 算术运算符实现

```scala
scala> var a = 10
a: Int = 10

scala> var b = 20
b: Int = 20

scala> a = a + b
a: Int = 30

scala> b = a -b
b: Int = 10

scala> a = a -b
a: Int = 20
```

### temp临时值

```scala
scala> var a = 10
a: Int = 10

scala> var b = 20
b: Int = 20

scala> var temp = a
temp: Int = 10

scala> a = b
a: Int = 20

scala> b = temp
b: Int = 10
```

### 位运算符实现

```scala
scala> var a = 10
a: Int = 10

scala> var b = 20
b: Int = 20

scala> var temp = a ^ b
temp: Int = 30

scala> a = a ^ temp
a: Int = 20

scala> b = b ^ temp
b: Int = 10
```

















